#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Verificando regras do projeto..."

# Executar verifica√ß√µes obrigat√≥rias
npm run rules:check

# Verificar se h√° arquivos com sufixos proibidos
if find src -name "*_old*" -o -name "*-old*" -o -name "*Copia*" -o -name "*-copia*" -o -name "*_-copy*" -o -name "*backup*"; then
  echo "‚ùå ERRO: Encontrados arquivos com sufixos proibidos (_old, -old, Copia, etc)"
  echo "   Remova esses arquivos antes de fazer commit"
  exit 1
fi

# Verificar se h√° imports relativos em src/
if grep -r "from '\.\./" src/ --include="*.ts" --include="*.tsx"; then
  echo "‚ùå ERRO: Encontrados imports relativos em src/"
  echo "   Use alias '@/path' em vez de '../' ou './'"
  exit 1
fi

# Verificar se h√° uso de 'any'
if grep -r ": any" src/ --include="*.ts" --include="*.tsx"; then
  echo "‚ùå ERRO: Encontrado uso de 'any'"
  echo "   Use tipos espec√≠ficos ou 'unknown'"
  exit 1
fi

# Verificar se h√° tooltips hardcoded
if grep -r "title=\"" src/ --include="*.tsx" | grep -v "tooltips\."; then
  echo "‚ùå ERRO: Encontrados tooltips hardcoded"
  echo "   Use tooltips do dicion√°rio central src/i18n/tooltips.ts"
  exit 1
fi

echo "‚úÖ Todas as regras foram verificadas com sucesso!" 